<Window x:Class="PhotoRenamer.App.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:models="clr-namespace:PhotoRenamer.App.Models"
        mc:Ignorable="d"
        Title="Photo Renamer" Height="700" Width="1080" MinHeight="560" MinWidth="860"
        Background="{DynamicResource WindowBackgroundBrush}">
    <Window.Resources>
        <SolidColorBrush x:Key="WindowBackgroundBrush" Color="#FFF7F7F7" />
        <SolidColorBrush x:Key="SurfaceBrush" Color="White" />
        <SolidColorBrush x:Key="SurfaceAltBrush" Color="#FFF8F8F8" />
        <SolidColorBrush x:Key="BorderBrush" Color="#FFD5D5D5" />
        <SolidColorBrush x:Key="PrimaryTextBrush" Color="#FF1F1F1F" />
        <SolidColorBrush x:Key="SecondaryTextBrush" Color="#FF5F5F5F" />

        <Style TargetType="GroupBox">
            <Setter Property="Background" Value="{DynamicResource SurfaceBrush}" />
            <Setter Property="BorderBrush" Value="{DynamicResource BorderBrush}" />
            <Setter Property="Foreground" Value="{DynamicResource PrimaryTextBrush}" />
        </Style>

        <Style TargetType="TextBox">
            <Setter Property="Background" Value="{DynamicResource SurfaceBrush}" />
            <Setter Property="Foreground" Value="{DynamicResource PrimaryTextBrush}" />
            <Setter Property="BorderBrush" Value="{DynamicResource BorderBrush}" />
        </Style>

        <Style TargetType="Button">
            <Setter Property="Background" Value="{DynamicResource SurfaceBrush}" />
            <Setter Property="Foreground" Value="{DynamicResource PrimaryTextBrush}" />
            <Setter Property="BorderBrush" Value="{DynamicResource BorderBrush}" />
        </Style>

        <Style TargetType="ListBox">
            <Setter Property="Background" Value="{DynamicResource SurfaceBrush}" />
            <Setter Property="Foreground" Value="{DynamicResource PrimaryTextBrush}" />
            <Setter Property="BorderBrush" Value="{DynamicResource BorderBrush}" />
        </Style>

        <Style TargetType="TreeView">
            <Setter Property="Background" Value="{DynamicResource SurfaceBrush}" />
            <Setter Property="Foreground" Value="{DynamicResource PrimaryTextBrush}" />
            <Setter Property="BorderBrush" Value="{DynamicResource BorderBrush}" />
        </Style>

        <Style TargetType="CheckBox">
            <Setter Property="Foreground" Value="{DynamicResource PrimaryTextBrush}" />
        </Style>

        <Style TargetType="TextBlock">
            <Setter Property="Foreground" Value="{DynamicResource PrimaryTextBrush}" />
        </Style>
    </Window.Resources>

    <Grid Margin="12" Background="{DynamicResource WindowBackgroundBrush}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <Grid Margin="0,0,0,12">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <StackPanel Orientation="Horizontal">
                <Button Content="Open Folder" Width="120" Click="OpenFolder_OnClick" />
                <TextBlock Text="   " />
                <TextBlock x:Name="FolderPathText" VerticalAlignment="Center" Foreground="{DynamicResource SecondaryTextBrush}" Text="No folder selected" />
            </StackPanel>

            <CheckBox Grid.Column="1"
                      x:Name="DarkModeCheckBox"
                      VerticalAlignment="Center"
                      Content="Dark mode"
                      Checked="ThemeToggleCheckBox_OnChanged"
                      Unchecked="ThemeToggleCheckBox_OnChanged" />
        </Grid>

        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*" />
                <ColumnDefinition Width="3*" />
            </Grid.ColumnDefinitions>

            <GroupBox Header="Folders + Files" Margin="0,0,8,0">
                <Grid Margin="8">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="2*" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="3*" />
                    </Grid.RowDefinitions>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <TextBlock Grid.Column="0" Text="Filter" FontWeight="SemiBold" Margin="0,0,6,6" VerticalAlignment="Center"/>

                        <TextBox x:Name="FileSearchTextBox"
                             Grid.Column="1"
                             Height="30"
                             Margin="0,0,0,8"
                             TextChanged="FileSearchTextBox_OnTextChanged" />

                    </Grid>
                    <TextBlock Grid.Row="1" Text="Folders" FontWeight="SemiBold" Margin="0,0,0,6" />
                    
                    <TreeView x:Name="FolderTreeView"
                              Grid.Row="2"
                              Margin="0,0,0,8"
                              SelectedItemChanged="FolderTreeView_OnSelectedItemChanged">
                        <TreeView.Resources>
                            <HierarchicalDataTemplate DataType="{x:Type models:FolderNode}" ItemsSource="{Binding Children}">
                                <TextBlock Text="{Binding Name}" Foreground="{DynamicResource PrimaryTextBrush}" />
                            </HierarchicalDataTemplate>
                        </TreeView.Resources>
                    </TreeView>

                    <Grid Grid.Row="3" Width="Auto">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        
                        <TextBlock Grid.Column="0" Text="Files" FontWeight="SemiBold" Margin="0,0,0,6"/>

                        <CheckBox x:Name="IncludeSubdirectoriesCheckBox"
                                  Grid.Column="1"
                                  Content="Include files from all subdirectories"
                                  Checked="IncludeSubdirectoriesCheckBox_OnChanged"
                                  Unchecked="IncludeSubdirectoriesCheckBox_OnChanged"
                                  HorizontalAlignment="Right"
                                  />
                    
                    </Grid>

                    <ListBox x:Name="FileListBox"
                             Grid.Row="5"
                             SelectionChanged="FileListBox_OnSelectionChanged"
                             DisplayMemberPath="DisplayName" />
                </Grid>
            </GroupBox>

            <Grid Grid.Column="1" Margin="8,0,0,0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="220" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <TextBlock x:Name="CurrentFileText"
                           FontSize="16"
                           FontWeight="SemiBold"
                           TextWrapping="Wrap"
                           Margin="0,0,0,12"
                           Text="Select a file to rename" />

                <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,0,0,12">
                    <TextBox x:Name="RenameTextBox" Width="280" Height="32" KeyDown="RenameTextBox_OnKeyDown" />
                    <Button Content="Rename + Next" Width="130" Margin="8,0,0,0" Click="RenameButton_OnClick" />
                </StackPanel>

                <StackPanel Grid.Row="2" Orientation="Horizontal" Margin="0,0,0,12">
                    <TextBox x:Name="DirectoryRenameTextBox" Width="280" Height="32" KeyDown="DirectoryRenameTextBox_OnKeyDown" />
                    <Button Content="Rename Folder" Width="130" Margin="8,0,0,0" Click="RenameDirectoryButton_OnClick" />
                </StackPanel>

                <Border Grid.Row="3" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1" CornerRadius="4" Margin="0,0,0,12" Background="{DynamicResource SurfaceAltBrush}">
                    <Grid>
                        <TextBlock x:Name="PhotoPreviewPlaceholder"
                                   Text="Preview unavailable"
                                   Foreground="{DynamicResource SecondaryTextBrush}"
                                   VerticalAlignment="Center"
                                   HorizontalAlignment="Center" />
                        <Image x:Name="PhotoPreviewImage"
                               Stretch="Uniform"
                               Margin="6"
                               Visibility="Collapsed"
                               MaxHeight="300"/>
                    </Grid>
                </Border>

                <TextBlock Grid.Row="4" Text="Quick People" FontWeight="SemiBold" Margin="0,0,0,8" />

                <DockPanel Grid.Row="5">
                    <StackPanel DockPanel.Dock="Top" Orientation="Horizontal" Margin="0,0,0,8">
                        <TextBox x:Name="NewPersonTextBox" Width="240" Height="30" KeyDown="NewPersonTextBox_OnKeyDown" />
                        <Button Content="Add Person" Width="110" Margin="8,0,0,0" Click="AddPersonButton_OnClick" />
                    </StackPanel>

                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                        <WrapPanel x:Name="PeopleButtonsPanel" />
                    </ScrollViewer>
                </DockPanel>
            </Grid>
        </Grid>

        <Grid Grid.Row="2" Margin="0,12,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <TextBlock x:Name="StatusText"
                       Foreground="{DynamicResource SecondaryTextBrush}"
                       Text="Ready" />

            <StackPanel Grid.Column="1" Orientation="Horizontal">
                <Button x:Name="CheckUpdatesButton" Content="Check for updates" Margin="0,0,8,0" Click="CheckUpdatesButton_OnClick" />
                <TextBlock x:Name="VersionText" Foreground="{DynamicResource SecondaryTextBrush}" VerticalAlignment="Center" Text="Version" />
            </StackPanel>
        </Grid>
    </Grid>
</Window>
